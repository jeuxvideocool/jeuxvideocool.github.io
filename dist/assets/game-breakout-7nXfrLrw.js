import{l as he,e as ye,f as fe,t as me,p as d,q as te,w as ve,m as k,n as q,s as xe}from"./index-CK9lGSzJ.js";/* empty css                    */import{c as we,a as be}from"./input-C49DsMBr.js";import{c as ge}from"./loop-24SuRqx9.js";const M="breakout",l=he(M),Z=ye(),y=Z.find(t=>t.id===(l==null?void 0:l.themeId))||Z[0];fe();if(y){const t=document.documentElement.style;t.setProperty("--color-primary",y.colors.primary),t.setProperty("--color-secondary",y.colors.secondary),t.setProperty("--color-accent",y.colors.accent),t.setProperty("--color-text",y.colors.text),t.setProperty("--color-muted",y.colors.muted),t.setProperty("--color-bg",y.colors.background),document.body.style.background=y.gradient||y.colors.background}const $=document.getElementById("game-root"),u=document.getElementById("game-canvas"),B=document.getElementById("ui"),r=u.getContext("2d"),T=we(),g=document.createElement("div");g.className="launch-overlay";g.style.display="none";B.appendChild(g);const D=document.createElement("div");D.className="toast-layer";$.appendChild(D);const R={left:(l==null?void 0:l.input.keys.left)||"ArrowLeft",right:(l==null?void 0:l.input.keys.right)||"ArrowRight",altLeft:(l==null?void 0:l.input.keys.altLeft)||"KeyQ",altRight:(l==null?void 0:l.input.keys.altRight)||"KeyD",launch:(l==null?void 0:l.input.keys.launch)||"Space"},E=be({gameId:M,container:document.body,input:T,touch:{mapping:{actionA:R.launch,actionALabel:"Lancer"},showPad:!1,gestureEnabled:!1},motion:{input:T,actions:[{code:R.launch,trigger:"shake"}]},hints:{touch:"Tactile : glisse la raquette, bouton Lancer.",motion:"Gyro : secoue pour lancer."}}),p={active:!1,dragging:!1,x:0,y:0,offsetX:0};function ae(t){const a=u.getBoundingClientRect(),s=e.width/a.width,i=e.height/a.height;return{x:(t.clientX-a.left)*s,y:(t.clientY-a.top)*i}}function se(t){const a=Math.max(12,e.paddle.h*1.8),s=t.x>=e.paddle.x-20&&t.x<=e.paddle.x+e.paddle.w+20,i=t.y>=e.paddle.y-a&&t.y<=e.paddle.y+e.paddle.h+a;return s&&i}u.style.touchAction="none";u.addEventListener("pointerdown",t=>{if(!E.isMobile)return;const a=ae(t);p.active=!0,p.x=a.x,p.y=a.y,se(a)&&(p.dragging=!0,p.offsetX=a.x-e.paddle.x)});u.addEventListener("pointermove",t=>{if(!p.active)return;const a=ae(t);p.x=a.x,p.y=a.y,!p.dragging&&se(a)&&(p.dragging=!0,p.offsetX=a.x-e.paddle.x)});const O=()=>{p.active=!1,p.dragging=!1};u.addEventListener("pointerup",O);u.addEventListener("pointercancel",O);u.addEventListener("pointerleave",O);const L=(l==null?void 0:l.difficultyParams.rows)??6,W=(l==null?void 0:l.difficultyParams.cols)??10,z=(l==null?void 0:l.difficultyParams.lives)??3,G=(l==null?void 0:l.difficultyParams.ballSpeed)??320,I=(l==null?void 0:l.difficultyParams.pointsPerBrick)??10,w={easy:{label:"Facile",rows:L+1,cols:W+1,lives:Math.max(3,z+1),ballSpeed:Math.round(G*.92),pointsPerBrick:Math.max(6,I),brickDensity:.78,powerupChance:.24},medium:{label:"Moyen",rows:L+2,cols:W+2,lives:z,ballSpeed:G,pointsPerBrick:I,brickDensity:.86,powerupChance:.2},hard:{label:"Difficile",rows:L+3,cols:W+3,lives:Math.max(2,z-1),ballSpeed:Math.round(G*1.1),pointsPerBrick:I+2,brickDensity:.92,powerupChance:.18},extreme:{label:"Extreme",rows:L+4,cols:W+4,lives:1,ballSpeed:Math.round(G*1.2),pointsPerBrick:I+4,brickDensity:.97,powerupChance:.16}};let P="medium";const b=w[P],X=[{type:"extra-ball",label:"Balles supplementaires",symbol:"+1",color:y.colors.primary,kind:"bonus",weight:2},{type:"speed-up",label:"Vitesse acceleree",symbol:"V+",color:"#f97316",kind:"malus",duration:6,speedMultiplier:1.35,weight:3},{type:"invert-controls",label:"Touches inversees",symbol:"INV",color:"#fb7185",kind:"malus",duration:6,weight:3},{type:"screen-shake",label:"Ecran qui tremble",symbol:"SHA",color:"#f43f5e",kind:"malus",duration:1.4,weight:2},{type:"paddle-shrink",label:"Raquette reduite",symbol:"R-",color:"#f472b6",kind:"malus",duration:8,paddleWidthMultiplier:.6,weight:3},{type:"paddle-slow",label:"Raquette lente",symbol:"LNT",color:"#fb923c",kind:"malus",duration:6,paddleSpeedMultiplier:.6,weight:2},{type:"ball-small",label:"Balle minuscule",symbol:"MIN",color:"#38bdf8",kind:"malus",duration:6,ballRadiusMultiplier:.7,weight:2}];var ee;const e={running:!1,width:0,height:0,dpr:devicePixelRatio||1,play:{x:0,y:0,w:0,h:0},paddle:{x:0,y:0,w:120,h:16,speed:640},paddleBaseWidth:120,paddleWidthMultiplier:1,paddleWidthTimer:0,paddleSpeedMultiplier:1,paddleSpeedTimer:0,balls:[],ballRadius:8,ballRadiusMultiplier:1,ballRadiusTimer:0,rows:b.rows,cols:b.cols,brickGap:d((l==null?void 0:l.difficultyParams.brickGap)??8,4,14),brickHeight:22,bricks:[],bricksRemaining:0,totalBricks:0,clearedRows:new Set,score:0,best:((ee=me().games[M])==null?void 0:ee.bestScore)??0,lives:b.lives,ballSpeed:b.ballSpeed,ballSpeedMultiplier:1,pointsPerBrick:b.pointsPerBrick,brickDensity:b.brickDensity,powerupChance:b.powerupChance,powerupSize:20,powerupFallSpeed:160,powerups:[],invertTimer:0,speedTimer:0,shakeTimer:0,shakeDuration:0,launchHeld:!1,flash:0},ie=ge({update:t=>Oe(t),render:pe,fps:60});function Y(){const t={...e.play};e.dpr=devicePixelRatio||1;const a=u.getBoundingClientRect();if(u.width=a.width*e.dpr,u.height=a.height*e.dpr,u.style.width="100%",u.style.height="100%",e.width=a.width,e.height=a.height,le(),t.w>0&&t.h>0){const s=(e.paddle.x-t.x)/t.w;e.paddle.x=e.play.x+d(s,0,1)*e.play.w,e.balls.forEach(i=>{if(i.stuck)return;const n=(i.x-t.x)/t.w,o=(i.y-t.y)/t.h;i.x=e.play.x+n*e.play.w,i.y=e.play.y+o*e.play.h}),e.powerups.forEach(i=>{const n=(i.x-t.x)/t.w,o=(i.y-t.y)/t.h;i.x=e.play.x+n*e.play.w,i.y=e.play.y+o*e.play.h})}else e.paddle.x=e.play.x+(e.play.w-e.paddle.w)/2;e.balls.some(s=>s.stuck)&&A(),ke()}function le(){const t=Math.max(16,Math.min(e.width,e.height)*.05),a=Math.min(e.width-t*2,920),s=e.height-t*2;e.play.x=(e.width-a)/2,e.play.y=t,e.play.w=a,e.play.h=s;const i=d((l==null?void 0:l.difficultyParams.paddleWidth)??a*.24,a*.16,a*.34);e.paddleBaseWidth=i,e.paddle.w=d(i*e.paddleWidthMultiplier,a*.12,a*.38),e.paddle.h=d(Math.floor(s*.03),10,18),e.paddle.y=e.play.y+e.play.h-e.paddle.h-Math.max(16,s*.04),e.ballRadius=d(Math.floor(a*.012),6,10),e.brickGap=d((l==null?void 0:l.difficultyParams.brickGap)??6,3,10);const n=Math.max(1,e.rows),o=Math.max(140,s*.55),h=Math.floor((o-e.brickGap*(n-1))/n);e.brickHeight=d(h,10,22),e.powerupSize=d(Math.floor(a*.03),16,26),e.powerupFallSpeed=d(s*.22,120,240),re(),e.powerups.forEach(f=>{f.size=e.powerupSize,f.vy=e.powerupFallSpeed})}function ke(){if(!e.bricks.length)return;const t=(e.play.w-e.brickGap*(e.cols-1))/e.cols,a=e.play.x,s=e.play.y+Math.max(18,e.play.h*.08);e.bricks.forEach(i=>{i.w=t,i.h=e.brickHeight,i.x=a+i.col*(t+e.brickGap),i.y=s+i.row*(e.brickHeight+e.brickGap)})}function ne(){const t=[y.colors.primary,y.colors.secondary,y.colors.accent,"#ffd166","#7ce7ff"],a=(e.play.w-e.brickGap*(e.cols-1))/e.cols,s=e.play.x,i=e.play.y+Math.max(18,e.play.h*.08);e.bricks=[],e.clearedRows=new Set;const n=d(e.brickDensity,.2,1),o=e.rows*e.cols,h=Math.round(o*n),f=Math.max(8,Math.floor(h*.75)),m=[],C=(c,v)=>{e.bricks.push({x:s+v*(a+e.brickGap),y:i+c*(e.brickHeight+e.brickGap),w:a,h:e.brickHeight,row:c,col:v,alive:!0,color:t[c%t.length]})};for(let c=0;c<e.rows;c+=1)for(let v=0;v<e.cols;v+=1)te(n)?C(c,v):m.push({row:c,col:v});if(e.bricks.length<f&&m.length>0){for(let c=m.length-1;c>0;c-=1){const v=Math.floor(k(0,c+1));[m[c],m[v]]=[m[v],m[c]]}for(const c of m){if(e.bricks.length>=f)break;C(c.row,c.col)}}e.bricks.length===0&&C(Math.floor(e.rows/2),Math.floor(e.cols/2)),e.totalBricks=e.bricks.length,e.bricksRemaining=e.totalBricks}function A(){e.balls.forEach(t=>{t.stuck&&(t.x=e.paddle.x+e.paddle.w/2,t.y=e.paddle.y-t.r-4)})}function Me(t){const a=_();return{x:e.paddle.x+e.paddle.w/2,y:e.paddle.y-a-4,vx:0,vy:0,r:a,stuck:t}}function F(){e.balls=[Me(!0)]}function V(){return e.ballSpeed*e.ballSpeedMultiplier}function j(t){const a=d(t,.6,1.6);if(a===e.ballSpeedMultiplier)return;const s=a/e.ballSpeedMultiplier;e.ballSpeedMultiplier=a,e.balls.forEach(i=>{i.stuck||(i.vx*=s,i.vy*=s)})}function _(){return d(e.ballRadius*e.ballRadiusMultiplier,4,12)}function re(){const t=_();e.balls.forEach(a=>{a.r=t}),e.balls.some(a=>a.stuck)&&A()}function K(t){const a=d(t,.5,1.4);a!==e.ballRadiusMultiplier&&(e.ballRadiusMultiplier=a,re())}function Se(t,a){K(t),e.ballRadiusTimer=a}function Q(t){const a=d(t,.45,1.5);if(a===e.paddleWidthMultiplier)return;e.paddleWidthMultiplier=a;const s=e.play.w*.12,i=e.play.w*.38;e.paddle.w=d(e.paddleBaseWidth*e.paddleWidthMultiplier,s,i),e.paddle.x=d(e.paddle.x,e.play.x,e.play.x+e.play.w-e.paddle.w),e.balls.some(n=>n.stuck)&&A()}function Te(t,a){Q(t),e.paddleWidthTimer=a}function U(t){const a=d(t,.45,1.6);e.paddleSpeedMultiplier=a}function Re(t,a){U(t),e.paddleSpeedTimer=a}function Be(t,a){j(t),e.speedTimer=a}function Pe(t){e.shakeTimer=t,e.shakeDuration=t}function Ee(){e.shakeTimer=0,e.shakeDuration=0,$.style.transform=""}function Ce(){const t=Math.PI/3,a=V();e.balls.forEach(s=>{if(!s.stuck)return;const i=-Math.PI/2+k(-t/2,t/2);s.vx=Math.cos(i)*a,s.vy=Math.sin(i)*a,s.stuck=!1})}function $e(t){const a=_(),s=e.paddle.x+e.paddle.w/2,i=e.paddle.y-a-4,n=Math.PI/2.2,o=V();for(let h=0;h<t;h+=1){const f=-Math.PI/2+k(-n/2,n/2);e.balls.push({x:s+k(-12,12),y:i,vx:Math.cos(f)*o,vy:Math.sin(f)*o,r:a,stuck:!1})}}function De(t,a){const s=document.createElement("div");s.className=`toast ${a}`,s.textContent=t,D.appendChild(s),requestAnimationFrame(()=>{s.classList.add("show")}),window.setTimeout(()=>{s.classList.remove("show"),window.setTimeout(()=>s.remove(),220)},1400)}function Le(){const t=X.reduce((s,i)=>s+i.weight,0);let a=k(0,t);for(const s of X)if(a-=s.weight,a<=0)return s;return X[0]}function We(t,a){const s=Le();e.powerups.push({x:t,y:a,vy:e.powerupFallSpeed+k(-20,40),size:e.powerupSize,type:s.type,label:s.label,symbol:s.symbol,color:s.color,kind:s.kind,duration:s.duration,speedMultiplier:s.speedMultiplier,paddleWidthMultiplier:s.paddleWidthMultiplier,paddleSpeedMultiplier:s.paddleSpeedMultiplier,ballRadiusMultiplier:s.ballRadiusMultiplier})}function Ge(t){te(e.powerupChance)&&We(t.x+t.w/2,t.y+t.h/2)}function Ie(t){const a=t.kind==="bonus"?"Bonus":"Malus";switch(De(`${a}: ${t.label}`,t.kind),t.type){case"extra-ball":$e(2);break;case"speed-up":Be(t.speedMultiplier??1.3,t.duration??6);break;case"invert-controls":e.invertTimer=t.duration??6;break;case"screen-shake":Pe(t.duration??1.2);break;case"paddle-shrink":Te(t.paddleWidthMultiplier??.6,t.duration??8);break;case"paddle-slow":Re(t.paddleSpeedMultiplier??.6,t.duration??6);break;case"ball-small":Se(t.ballRadiusMultiplier??.7,t.duration??6);break}}function He(t){const a=e.paddle,s=e.play.y+e.play.h;e.powerups=e.powerups.filter(i=>(i.y+=i.vy*t,i.y-i.size>s?!1:i.y+i.size/2>=a.y&&i.y-i.size/2<=a.y+a.h&&i.x>=a.x&&i.x<=a.x+a.w?(Ie(i),!1):!0))}function oe(t){e.rows=t.rows,e.cols=t.cols,e.lives=t.lives,e.ballSpeed=t.ballSpeed,e.pointsPerBrick=t.pointsPerBrick,e.brickDensity=d(t.brickDensity,.2,1),e.powerupChance=d(t.powerupChance,.05,.4)}function de(){e.invertTimer=0,e.speedTimer=0,e.paddleWidthTimer=0,e.paddleSpeedTimer=0,e.ballRadiusTimer=0,j(1),Q(1),U(1),K(1),Ee()}function qe(){if(!l){N("Config manquante","Ajoute configs/games/breakout.config.json",!1);return}E.show();const t=w[P]||w.medium;oe(t),le(),de(),D.innerHTML="",e.running=!0,e.score=0,e.flash=0,p.active=!1,p.dragging=!1,e.powerups=[],e.paddle.x=e.play.x+(e.play.w-e.paddle.w)/2,F(),ne(),g.style.display="none",u.style.pointerEvents="auto",B.style.pointerEvents="none",q({type:"SESSION_START",gameId:M}),ie.start()}function ce(t){e.running=!1,ie.stop(),E.hide(),de(),e.powerups=[],D.innerHTML="";const a=e.score;q({type:t?"SESSION_WIN":"SESSION_FAIL",gameId:M,payload:{score:a}}),xe(M,(l==null?void 0:l.saveSchemaVersion)??1,n=>{const o=n.bestScore||0;a>o&&(n.bestScore=a);const h=e.totalBricks-e.bricksRemaining,f=n.state.bestBricks||0;h>f&&(n.state.bestBricks=h)}),e.best=Math.max(e.best,a),N(t?"Victoire":"Perdu",(l==null?void 0:l.uiText.help)||"Relance une partie pour battre ton record.",!0,a)}function Ae(){e.lives=Math.max(0,e.lives-1),e.flash=1,e.lives<=0?ce(!1):F()}function Ne(t){t.alive&&(t.alive=!1,e.bricksRemaining-=1,e.score+=e.pointsPerBrick,q({type:"BRICK_BROKEN",gameId:M,payload:{score:e.score}}),Ge(t),e.clearedRows.has(t.row)||!e.bricks.some(s=>s.alive&&s.row===t.row)&&(e.clearedRows.add(t.row),q({type:"ROW_CLEARED",gameId:M})),e.bricksRemaining<=0&&ce(!0))}function ze(t){if(e.speedTimer>0&&(e.speedTimer=Math.max(0,e.speedTimer-t),e.speedTimer===0&&j(1)),e.paddleWidthTimer>0&&(e.paddleWidthTimer=Math.max(0,e.paddleWidthTimer-t),e.paddleWidthTimer===0&&Q(1)),e.paddleSpeedTimer>0&&(e.paddleSpeedTimer=Math.max(0,e.paddleSpeedTimer-t),e.paddleSpeedTimer===0&&U(1)),e.ballRadiusTimer>0&&(e.ballRadiusTimer=Math.max(0,e.ballRadiusTimer-t),e.ballRadiusTimer===0&&K(1)),e.invertTimer>0&&(e.invertTimer=Math.max(0,e.invertTimer-t)),e.shakeTimer>0&&(e.shakeTimer=Math.max(0,e.shakeTimer-t)),e.shakeTimer>0){const a=e.shakeDuration>0?e.shakeTimer/e.shakeDuration:0,s=Math.max(1,8*a);$.style.transform=`translate(${k(-s,s)}px, ${k(-s,s)}px)`}else $.style.transform&&($.style.transform="")}function Xe(t){e.balls.some(a=>a.stuck)&&A();for(let a=e.balls.length-1;a>=0;a-=1){const s=e.balls[a];if(s.stuck)continue;s.x+=s.vx*t,s.y+=s.vy*t,Ye(s)&&e.balls.splice(a,1)}e.balls.length===0&&Ae()}function Oe(t){if(!e.running)return;ze(t);const a=T.isDown(R.left)||T.isDown(R.altLeft),i=(T.isDown(R.right)||T.isDown(R.altRight)?1:0)-(a?1:0),n=e.invertTimer>0?-i:i;if(n!==0&&(e.paddle.x+=n*e.paddle.speed*e.paddleSpeedMultiplier*t),E.isMobile&&p.dragging){const h=p.x-p.offsetX,f=e.play.x+e.play.w-(h-e.play.x)-e.paddle.w,m=e.invertTimer>0?f:h;e.paddle.x=m}e.paddle.x=d(e.paddle.x,e.play.x,e.play.x+e.play.w-e.paddle.w);const o=T.isDown(R.launch);e.balls.some(h=>h.stuck)&&o&&!e.launchHeld&&Ce(),e.launchHeld=o,Xe(t),e.running&&(He(t),e.flash=Math.max(0,e.flash-t*2))}function Ye(t){const a=e.play;if(t.x-t.r<=a.x&&(t.x=a.x+t.r,t.vx=Math.abs(t.vx)),t.x+t.r>=a.x+a.w&&(t.x=a.x+a.w-t.r,t.vx=-Math.abs(t.vx)),t.y-t.r<=a.y&&(t.y=a.y+t.r,t.vy=Math.abs(t.vy)),t.y-t.r>a.y+a.h)return!0;if(t.vy>0&&t.y+t.r>=e.paddle.y&&t.y-t.r<=e.paddle.y+e.paddle.h&&t.x>=e.paddle.x&&t.x<=e.paddle.x+e.paddle.w){const s=(t.x-(e.paddle.x+e.paddle.w/2))/(e.paddle.w/2),n=d(s,-1,1)*(Math.PI/3),o=V();t.vx=Math.sin(n)*o,t.vy=-Math.cos(n)*o,t.y=e.paddle.y-t.r-.5}for(const s of e.bricks){if(!s.alive||t.x+t.r<s.x||t.x-t.r>s.x+s.w||t.y+t.r<s.y||t.y-t.r>s.y+s.h)continue;const i=Math.min(t.x+t.r-s.x,s.x+s.w-(t.x-t.r)),n=Math.min(t.y+t.r-s.y,s.y+s.h-(t.y-t.r));i<n?t.vx*=-1:t.vy*=-1,Ne(s);break}return!1}function H(t,a,s,i,n){const o=Math.min(n,s/2,i/2);r.beginPath(),r.moveTo(t+o,a),r.lineTo(t+s-o,a),r.quadraticCurveTo(t+s,a,t+s,a+o),r.lineTo(t+s,a+i-o),r.quadraticCurveTo(t+s,a+i,t+s-o,a+i),r.lineTo(t+o,a+i),r.quadraticCurveTo(t,a+i,t,a+i-o),r.lineTo(t,a+o),r.quadraticCurveTo(t,a,t+o,a),r.closePath()}function Fe(){e.powerups.length&&(r.save(),r.textAlign="center",r.textBaseline="middle",e.powerups.forEach(t=>{const a=t.size,s=a/2,i=r.createLinearGradient(t.x-s,t.y-s,t.x+s,t.y+s);i.addColorStop(0,t.color),i.addColorStop(1,`${t.color}cc`),r.fillStyle=i,H(t.x-s,t.y-s,a,a,8),r.fill(),r.strokeStyle="rgba(255,255,255,0.28)",r.lineWidth=1,r.stroke(),r.fillStyle="#0b1020",r.font=`700 ${Math.max(10,a*.45)}px "Space Grotesk", "Sora", system-ui, sans-serif`,r.fillText(t.symbol,t.x,t.y+.5)}),r.restore())}function pe(){const t=Math.round(u.clientWidth),a=Math.round(u.clientHeight);(t!==Math.round(e.width)||a!==Math.round(e.height))&&Y(),r.save(),r.scale(e.dpr,e.dpr),r.clearRect(0,0,e.width,e.height);const s=r.createLinearGradient(0,0,e.width,e.height);s.addColorStop(0,"rgba(96,165,250,0.08)"),s.addColorStop(.5,"rgba(251,191,36,0.05)"),s.addColorStop(1,"rgba(244,114,182,0.08)"),r.fillStyle=s,r.fillRect(0,0,e.width,e.height),r.fillStyle="rgba(255,255,255,0.04)",H(e.play.x,e.play.y,e.play.w,e.play.h,18),r.fill(),r.strokeStyle="rgba(255,255,255,0.12)",r.lineWidth=1.2,r.stroke(),e.bricks.forEach(n=>{if(!n.alive)return;const o=r.createLinearGradient(n.x,n.y,n.x,n.y+n.h);o.addColorStop(0,n.color),o.addColorStop(1,`${n.color}cc`),r.fillStyle=o,H(n.x,n.y,n.w,n.h,8),r.fill(),r.strokeStyle="rgba(255,255,255,0.18)",r.lineWidth=1,r.stroke()}),Fe();const i=r.createLinearGradient(e.paddle.x,e.paddle.y,e.paddle.x+e.paddle.w,e.paddle.y);i.addColorStop(0,y.colors.secondary),i.addColorStop(1,y.colors.primary),r.fillStyle=i,H(e.paddle.x,e.paddle.y,e.paddle.w,e.paddle.h,10),r.fill(),e.balls.forEach(n=>{const o=r.createRadialGradient(n.x-n.r*.4,n.y-n.r*.4,n.r*.2,n.x,n.y,n.r);o.addColorStop(0,"#ffffff"),o.addColorStop(1,y.colors.accent),r.fillStyle=o,r.beginPath(),r.arc(n.x,n.y,n.r,0,Math.PI*2),r.fill()}),r.restore(),Ve()}function Ve(){B.innerHTML="",B.appendChild(g);const t=e.totalBricks-e.bricksRemaining,a=w[P]||w.medium,s=e.balls.some(o=>o.stuck),i=document.createElement("div");i.className="hud",i.innerHTML=`
    <div class="chip">Score <strong>${e.score}</strong></div>
    <div class="chip">Briques <strong>${t}/${e.totalBricks}</strong></div>
    <div class="chip ghost">Vies <span>${e.lives}</span></div>
    <div class="chip ghost">Record <span>${e.best}</span></div>
    <div class="chip ghost">Niveau <span>${a.label}</span></div>
  `,B.appendChild(i);const n=document.createElement("div");n.className="hud bottom",n.innerHTML=`
    <div class="pill ${s?"glow":""}">${s?"Pret a lancer":`Balles ${e.balls.length}`}</div>
    <div class="pill ghost">${s?"Espace pour lancer":"Attrape les bonus/malus"}</div>
  `,B.appendChild(n)}function N(t,a,s=!0,i){var J;E.hide();const n=w[P]||w.medium;g.style.display="grid",B.style.pointerEvents="auto",u.style.pointerEvents="none";const o=(l==null?void 0:l.uiText.shortDescription)||"",h=a||(l==null?void 0:l.uiText.help)||"",f=((l==null?void 0:l.uiText.controls)||[]).map(S=>`<span class="launch-chip">${S}</span>`).join(""),m=Math.round(n.rows*n.cols*n.brickDensity),C="Bonus/Malus tombent : balles +, vitesse accélérée, touches inversées, écran qui tremble, raquette réduite, raquette lente, balle minuscule.",v=`
    <div class="launch-rows">
      <div class="launch-row">
        <span class="launch-row-label">Difficulté</span>
        <div class="launch-row-value launch-options">
          ${Object.entries(w).map(([S,x])=>`
        <button class="launch-option diff-btn ${S===P?"is-active":""}" data-diff="${S}">
          <span class="launch-option-title">${x.label}</span>
          <span class="launch-option-meta">${x.rows}x${x.cols} · ${x.lives} vie${x.lives>1?"s":""}</span>
        </button>
      `).join("")}
        </div>
      </div>
      <div class="launch-row">
        <span class="launch-row-label">Mode</span>
        <div class="launch-row-value">
          <span class="launch-chip">Standard</span>
        </div>
      </div>
    </div>
  `,ue=`
    <div class="launch-metrics">
      <div class="launch-metric"><span>Record</span><strong>${e.best}</strong></div>
      <div class="launch-metric"><span>Briques</span><strong>~${m}</strong></div>
      <div class="launch-metric"><span>Vies</span><strong>${n.lives}</strong></div>
    </div>
  `;g.innerHTML=`
    <div class="launch-card">
      <div class="launch-head">
        <div class="launch-brand">
          <span class="launch-badge">Arcade Galaxy</span>
          <span class="launch-badge ghost">${(l==null?void 0:l.uiText.title)||"Casse-briques"}</span>
        </div>
        <h2 class="launch-title">${t}</h2>
        ${o?`<p class="launch-subtitle">${o}</p>`:""}
      </div>
      <div class="launch-grid">
        <section class="launch-section">
          <h3 class="launch-section-title">Briefing</h3>
          <p class="launch-text">${h}</p>
          ${i!==void 0?`<p class="launch-note">Dernier score : ${i}</p>`:""}
          <p class="launch-note">${C}</p>
        </section>
        <section class="launch-section">
          <h3 class="launch-section-title">Paramètres</h3>
          ${v}
        </section>
        <section class="launch-section">
          <h3 class="launch-section-title">Contrôles</h3>
          <div class="launch-chips">
            ${f||'<span class="launch-chip muted">Contrôles à définir</span>'}
          </div>
        </section>
        <section class="launch-section">
          <h3 class="launch-section-title">Repères</h3>
          ${ue}
        </section>
      </div>
      <div class="launch-actions">
        ${s?'<button class="launch-btn primary" id="launch-start">Lancer</button>':""}
        <a class="launch-btn ghost" href="${ve("/")}">Hub</a>
      </div>
    </div>
  `,E.attachOverlay(g),(J=document.getElementById("launch-start"))==null||J.addEventListener("click",qe),document.querySelectorAll(".diff-btn").forEach(S=>{S.addEventListener("click",()=>{const x=S.dataset.diff;x&&w[x]&&(P=x,N(t,a,s,i))})})}Y();window.addEventListener("resize",Y);oe(b);ne();e.paddle.x=e.play.x+(e.play.w-e.paddle.w)/2;F();N((l==null?void 0:l.uiText.title)||"Casse-briques",(l==null?void 0:l.uiText.help)||"");pe();
