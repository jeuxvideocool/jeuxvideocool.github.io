import{l as T,e as E,f as k,n as b,w as x,s as Y}from"./index-CK9lGSzJ.js";/* empty css                    */const w=[{id:"satisfaction",label:"Satisfaction affichee",visible:!0,initial:54,polarity:"positive"},{id:"performance",label:"Performance business",visible:!0,initial:56,polarity:"positive"},{id:"legal",label:"Conformite legale",visible:!0,initial:62,polarity:"positive"},{id:"pressure",label:"Pression hierarchique",visible:!0,initial:48,polarity:"negative"},{id:"reputation",label:"Reputation RH",visible:!0,initial:50,polarity:"positive"},{id:"burnout",label:"Epuisement reel",visible:!1,initial:35,polarity:"negative"},{id:"cynicism",label:"Cynisme collectif",visible:!1,initial:38,polarity:"negative"},{id:"socialRisk",label:"Risque social latent",visible:!1,initial:30,polarity:"negative"}],L=[{id:"intro-barometre",title:"Semaine 1 - Barometre qui gratte",difficulty:1,context:{mail:"Objet: Barometre Q2 - merci d'eviter les verbatims qui sentent la merde.",meeting:"Reunion hebdo RH: on vend l'energie, pas les irritants. Pas de slide qui pique.",rumor:"Rumeur: la version brute circule deja en PDF 'pas pour diffusion'.",incident:"Incident discret: une capture des arrets a atterri sur le channel memes.",urgentRequest:"Demande urgente: COMEX veut une note clean avant demain 9h."},problem:"Le barometre crie. Le terrain veut des actes, la direction veut un vernis. Tu choisis ce qui se voit.",choices:[{id:"intro-optimize",label:"Publier une synthese optimisee, actions rapides et vocabulaire positif.",immediateEffects:{satisfaction:4,performance:2,legal:-2,pressure:-3,reputation:1,burnout:1,cynicism:4,socialRisk:3},deferredConsequences:[{delay:2,summary:"Fuite des verbatims bruts. Indignation froide et documentee.",event:"Un cadre partage le fichier original a un collectif.",effects:{satisfaction:-6,reputation:-4,socialRisk:8,legal:-3}}],feedback:"Synthese alignee. L'Excel respire. On gagne une journee.",futureEvent:"Risque de fuite si un verbatim sale ressort.",endingImpact:"Renforce une trajectoire performante mais impopulaire."},{id:"intro-listen",label:"Lancer des ateliers d'ecoute limites, anonymes, avec cadrage serre.",immediateEffects:{satisfaction:6,performance:-2,legal:1,pressure:3,reputation:3,burnout:-2,cynicism:-2,socialRisk:-1},deferredConsequences:[{delay:2,summary:"Attentes non financees. La parole tourne court.",event:"Les groupes disent avoir servi de vitrine.",effects:{cynicism:6,satisfaction:-3,pressure:2}}],feedback:"Signal humain envoye. Agenda surcharge. Le COMEX soupire.",futureEvent:"Risque d'effet boomerang si rien ne suit.",endingImpact:"Favorise une fin humaine mais politisee."},{id:"intro-legal",label:"Remonter l'alerte au juridique et geler la comm, le temps de blinder.",immediateEffects:{satisfaction:-3,performance:-1,legal:5,pressure:5,reputation:1,burnout:1,cynicism:1,socialRisk:2},deferredConsequences:[{delay:1,summary:"Le juridique demande des traces et des preuves. Ca gratte.",event:"Audit interne surprise.",effects:{pressure:3,performance:-2,legal:2,burnout:2}}],feedback:"Couverture legale solide. Ambiance crispee.",futureEvent:"Audit interne si les signaux se confirment.",endingImpact:"Rend plausible une fin sacrifiee par le systeme."}]},{id:"mobilite-agile",title:"Semaine 3 - Mobilite agile",difficulty:2,context:{mail:"Objet: Projet Mobilite Agile - rationaliser sans dire le mot qui fache.",meeting:"Comite managers: on requalifie les postes, pas besoin de filer la trouille.",rumor:"Rumeur: une liste de 40 noms circule, avec des smileys.",incident:"Incident discret: un manager annonce un changement sans RH, c'est le bordel.",urgentRequest:"Demande urgente: CFO veut un plan low noise d'ici vendredi."},problem:"Le plan coupe dans les couts et dans le moral. On veut de l'agile, pas de la casse. Tu cadres la methode.",choices:[{id:"mobilite-force",label:"Valider la mobilite forcee avec un discours d'opportunite.",immediateEffects:{satisfaction:-5,performance:6,legal:-3,pressure:-2,reputation:-3,burnout:4,cynicism:5,socialRisk:5},deferredConsequences:[{delay:1,summary:"Plainte collective et intervention des representants.",event:"Saisine de l'inspection du travail.",effects:{legal:-6,socialRisk:7,reputation:-2}}],feedback:"Plan accelere. Froid mais net. Ca sent la poussiere froide.",futureEvent:"Risque de contentieux si un dossier sort.",endingImpact:"Renforce la trajectoire DRH performante mais detestee."},{id:"mobilite-pilote",label:"Negocier un pilote transparent avec volontariat limite.",immediateEffects:{satisfaction:3,performance:-2,legal:2,pressure:2,reputation:2,burnout:1,cynicism:-1,socialRisk:-1},deferredConsequences:[{delay:2,summary:"Le pilote ralentit les economies mais apaise.",event:"Le Comex valide une phase 2 plus douce.",effects:{performance:4,satisfaction:2,pressure:-2}}],feedback:"Tu gagnes du temps, pas du credit. Les managers grognent.",futureEvent:"Phase 2 conditionnee aux resultats.",endingImpact:"Favorise une fin humaine mais marginalisee."},{id:"mobilite-stop",label:"Bloquer le projet et demander un arbitrage officiel.",immediateEffects:{satisfaction:1,performance:-4,legal:3,pressure:5,reputation:2,burnout:-2,cynicism:-1,socialRisk:-2},deferredConsequences:[{delay:1,summary:"Le sponsor cherche un contournement. Cabinet externe.",event:"Un cabinet arrive avec un plan sec.",effects:{pressure:4,performance:-2,cynicism:2}}],feedback:"Position principielle. Alliances fragiles. Ca peut te revenir.",futureEvent:"Cabinet externe si l'arbitrage patine.",endingImpact:"Rend plausible une fin sacrifiee ou isolee."}]},{id:"calibration",title:"Semaine 6 - Calibration des performances",difficulty:3,context:{mail:"Objet: Ajustement bonus - marge Q3. On ne dit pas plan social.",meeting:"Reunion managers: on doit sortir 10% en plan de perf, vite et propre.",rumor:"Rumeur: une liste des trop chers circule, onglet 'chiants'.",incident:"Incident discret: un employe craque en open space, chaise renversee.",urgentRequest:"Demande urgente: liste PIP pour demain 18h."},problem:"Le tri parait inevitable. Personne ne veut se salir les mains, tout le monde veut les chiffres.",choices:[{id:"calibration-forced",label:"Appliquer le forced ranking et livrer la liste.",immediateEffects:{satisfaction:-6,performance:5,legal:-2,pressure:-3,reputation:-4,burnout:4,cynicism:6,socialRisk:6},deferredConsequences:[{delay:1,summary:"Depart massif et murmures de greve.",event:"Des leaders informels parlent d'arret.",effects:{socialRisk:7,reputation:-5,satisfaction:-3}}],feedback:"Liste livree. Silence dans les couloirs. Ca pue le non-dit.",futureEvent:"Risque d'arret collectif si la liste fuit.",endingImpact:"Pousse vers DRH performant mais deteste."},{id:"calibration-support",label:"Proposer un plan d'accompagnement avec objectifs realistes.",immediateEffects:{satisfaction:-2,performance:2,legal:1,pressure:2,reputation:2,burnout:1,cynicism:-1,socialRisk:-1},deferredConsequences:[{delay:2,summary:"Les equipes remercient mais demandent des moyens.",event:"La charge de travail devient le sujet #1.",effects:{burnout:4,satisfaction:3,pressure:1}}],feedback:"Tu gagnes du lien, pas des lignes de budget. Le CFO grimace.",futureEvent:"La charge revient en boomerang.",endingImpact:"Renforce une fin humaine mais marginalisee."},{id:"calibration-refuse",label:"Refuser la liste, demander mediation collective.",immediateEffects:{satisfaction:3,performance:-3,legal:3,pressure:5,reputation:3,burnout:-1,cynicism:-2,socialRisk:-2},deferredConsequences:[{delay:1,summary:"Le Comex te passe en risque politique.",event:"On te retire un dossier strategique.",effects:{pressure:4,reputation:-2,performance:-1}}],feedback:"Posture claire. Couloir politique ferme. Tu le sens venir.",futureEvent:"Retrait de dossier si la tension monte.",endingImpact:"Rend plausible une fin sacrifiee."}]},{id:"crise-publique",title:"Semaine 9 - Exposition publique",difficulty:4,context:{mail:"Objet: Article presse en preparation. Ne pas repondre a chaud.",meeting:"Comite de crise: on aligne la narration, pas les details.",rumor:"Rumeur: les syndicats preparent un appel public, ton nom circule.",incident:"Incident discret: un post LinkedIn anonyme cite la boite. Ca buzze.",urgentRequest:"Demande urgente: memo et nom de porte-parole, idealement pas toi."},problem:"L'exterieur regarde enfin. La RH devient visible. Le systeme veut un fusible.",choices:[{id:"crise-fusible",label:"Cadrer la com' et designer un manager fusible.",immediateEffects:{satisfaction:-4,performance:2,legal:-3,pressure:-2,reputation:4,burnout:3,cynicism:5,socialRisk:6},deferredConsequences:[{delay:1,summary:"Le fusible parle. La version se fissure.",event:"Un avocat publie des mails internes.",effects:{legal:-5,reputation:-4,socialRisk:4}}],feedback:"Sortie de crise rapide. Detonateur en reserve.",futureEvent:"Risque de contre-recits publics.",endingImpact:"Pousse vers une fin sacrifiee ou cynique."},{id:"crise-cooperate",label:"Cooperer avec l'inspection et partager les donnees brutes.",immediateEffects:{satisfaction:1,performance:-2,legal:5,pressure:4,reputation:1,burnout:2,cynicism:-1,socialRisk:-2},deferredConsequences:[{delay:1,summary:"Le rapport officialise les tensions mais ouvre un plan.",event:"Le Comex impose une tutelle RH.",effects:{pressure:-3,socialRisk:-3,reputation:2}}],feedback:"Conformite sauvee. Autorite entamee. Tu perds la main.",futureEvent:"Tutelle si l'inspection conclut a un risque.",endingImpact:"Peut mener a une fin humaine mais marginalisee."},{id:"crise-wellbeing",label:"Lancer un plan bien-etre express et storytelling interne.",immediateEffects:{satisfaction:3,performance:-1,legal:-1,pressure:1,reputation:2,burnout:1,cynicism:2,socialRisk:2},deferredConsequences:[{delay:1,summary:"Le decalage entre discours et realite explose.",event:"Un hashtag moqueur devient viral.",effects:{cynicism:8,satisfaction:-4,socialRisk:5,reputation:-3}}],feedback:"Surface propre. Fond inquiet. Les memes vont plus vite.",futureEvent:"Risque de backlash public si la campagne tourne mal.",endingImpact:"Renforce une fin cynique ou broyee."}]}],W=[{id:"burnout",title:"RH broyee",description:"Tu tiens la barque a mains nues. Tu craques. Le systeme t'oublie vite.",min:{burnout:80,pressure:70}},{id:"scapegoat",title:"RH sacrifiee",description:"Le dossier devait tomber. Tu etais la variable d'ajustement.",min:{pressure:75,socialRisk:60}},{id:"cynic",title:"RH devenu cynique",description:"Tu parles KPI. Tu dors Excel. Tu ne ressens plus grand-chose.",min:{cynicism:70,reputation:40}},{id:"drh-hated",title:"DRH performant mais deteste",description:"Objectifs atteints. Regards froids. Dossiers propres. Couloirs vides.",min:{performance:70},max:{satisfaction:40,reputation:45}},{id:"human-marginalized",title:"RH humaine mais marginalisee",description:"Tu as protege des gens. Le pouvoir t'a contourne.",min:{satisfaction:65},max:{performance:55}},{id:"exit-system",title:"RH qui quitte le systeme",description:"Tu pars avant de devenir un rouage. Le systeme continue sans toi.",min:{burnout:70,reputation:45}},{id:"limbo",title:"RH en sursis",description:"Tu restes. Rien n'est resolu. La prochaine crise est deja planifiee."}],Q={gauges:w,scenarios:L,endings:W},u="rhlife",s=T(u),y=E(),I=s&&y.find(e=>e.id===s.themeId)||y[0];k();const C=Q,g=C.gauges,m=C.scenarios,v=C.endings,J=new Map(g.map(e=>[e.id,e])),M=(s==null?void 0:s.difficultyParams.startingGauge)??50,O=(s==null?void 0:s.difficultyParams.minGauge)??0,$=(s==null?void 0:s.difficultyParams.maxGauge)??100,q={"intro-barometre":{src:new URL("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIwIiBoZWlnaHQ9IjMyMCIgdmlld0JveD0iMCAwIDUyMCAzMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjUyMCIgaGVpZ2h0PSIzMjAiIHJ4PSIyOCIgZmlsbD0iIzBiMTAxYSIgLz4KICA8cmVjdCB4PSIzMiIgeT0iMjgiIHdpZHRoPSI0NTYiIGhlaWdodD0iMjY0IiByeD0iMjQiIGZpbGw9IiMwZjE3MmEiIHN0cm9rZT0iIzFmMjkzNyIgc3Ryb2tlLXdpZHRoPSIyIiAvPgogIDxyZWN0IHg9IjYwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxNDAiIHJ4PSIxNiIgZmlsbD0iIzBiMTMyNCIgc3Ryb2tlPSIjMmIzNjQ4IiBzdHJva2Utd2lkdGg9IjIiIC8+CiAgPHJlY3QgeD0iNzYiIHk9IjE1MCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjM2IiByeD0iNiIgZmlsbD0iIzY0ZjRhYyIgLz4KICA8cmVjdCB4PSIxMDgiIHk9IjEzMCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjU2IiByeD0iNiIgZmlsbD0iI2ZmZDE2NiIgLz4KICA8cmVjdCB4PSIxNDAiIHk9IjEwOCIgd2lkdGg9IjI0IiBoZWlnaHQ9Ijc4IiByeD0iNiIgZmlsbD0iI2ZmNmI2YiIgLz4KICA8cmVjdCB4PSIxNzIiIHk9IjEyMCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjY2IiByeD0iNiIgZmlsbD0iI2ZmZDE2NiIgLz4KICA8cmVjdCB4PSIyMDQiIHk9IjkyIiB3aWR0aD0iMjQiIGhlaWdodD0iOTQiIHJ4PSI2IiBmaWxsPSIjNjRmNGFjIiAvPgogIDxyZWN0IHg9IjIzNiIgeT0iMTM2IiB3aWR0aD0iMjQiIGhlaWdodD0iNTAiIHJ4PSI2IiBmaWxsPSIjN2RkM2ZjIiAvPgogIDxyZWN0IHg9IjMyOCIgeT0iNzIiIHdpZHRoPSIxMzIiIGhlaWdodD0iMTE2IiByeD0iMTYiIGZpbGw9IiMxMTE4MjciIHN0cm9rZT0iIzJiMzY0OCIgc3Ryb2tlLXdpZHRoPSIyIiAvPgogIDxwYXRoIGQ9Ik0zNTQgMTU4YzE4IDE4IDQ2IDE4IDY0IDAiIHN0cm9rZT0iI2ZmZDE2NiIgc3Ryb2tlLXdpZHRoPSI2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIC8+CiAgPGNpcmNsZSBjeD0iMzY0IiBjeT0iMTIwIiByPSIxMCIgZmlsbD0iI2ZmNmI2YiIgLz4KICA8Y2lyY2xlIGN4PSI0MTgiIGN5PSIxMjAiIHI9IjEwIiBmaWxsPSIjNjRmNGFjIiAvPgogIDxyZWN0IHg9IjMyMCIgeT0iMjEwIiB3aWR0aD0iMTU2IiBoZWlnaHQ9IjUyIiByeD0iMTIiIGZpbGw9IiMwYjEzMjQiIHN0cm9rZT0iIzJiMzY0OCIgc3Ryb2tlLXdpZHRoPSIyIiAvPgogIDxyZWN0IHg9IjMzNiIgeT0iMjI0IiB3aWR0aD0iNjAiIGhlaWdodD0iMTAiIHJ4PSI1IiBmaWxsPSIjOTRhM2I4IiAvPgogIDxyZWN0IHg9IjMzNiIgeT0iMjQwIiB3aWR0aD0iOTYiIGhlaWdodD0iMTAiIHJ4PSI1IiBmaWxsPSIjNDc1NTY5IiAvPgogIDxyZWN0IHg9IjYwIiB5PSIyMjAiIHdpZHRoPSIyMjAiIGhlaWdodD0iMjAiIHJ4PSIxMCIgZmlsbD0iIzEwMWIyZiIgLz4KICA8cmVjdCB4PSI2MCIgeT0iMjIwIiB3aWR0aD0iMTI4IiBoZWlnaHQ9IjIwIiByeD0iMTAiIGZpbGw9IiNmZmQxNjYiIC8+CiAgPHRleHQgeD0iNjYiIHk9IjIxNCIgZmlsbD0iIzk0YTNiOCIgZm9udC1zaXplPSIxMiIgZm9udC1mYW1pbHk9IlNwYWNlIEdyb3Rlc2ssIHNhbnMtc2VyaWYiPlEyIG1vb2Q8L3RleHQ+Cjwvc3ZnPgo=",import.meta.url).href,alt:"Tableau de barometre avec indicateurs instables."},"mobilite-agile":{src:new URL("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIwIiBoZWlnaHQ9IjMyMCIgdmlld0JveD0iMCAwIDUyMCAzMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjUyMCIgaGVpZ2h0PSIzMjAiIHJ4PSIyOCIgZmlsbD0iIzBiMTAxYSIgLz4KICA8cmVjdCB4PSIzMiIgeT0iMjgiIHdpZHRoPSI0NTYiIGhlaWdodD0iMjY0IiByeD0iMjQiIGZpbGw9IiMwZjE3MmEiIHN0cm9rZT0iIzFmMjkzNyIgc3Ryb2tlLXdpZHRoPSIyIiAvPgogIDxyZWN0IHg9IjcwIiB5PSI3NiIgd2lkdGg9IjE3MCIgaGVpZ2h0PSIxNzAiIHJ4PSIyMCIgZmlsbD0iIzExMTgyNyIgc3Ryb2tlPSIjMmIzNjQ4IiBzdHJva2Utd2lkdGg9IjIiIC8+CiAgPHJlY3QgeD0iMTAwIiB5PSI2NCIgd2lkdGg9IjExMCIgaGVpZ2h0PSIyMCIgcng9IjEwIiBmaWxsPSIjMmIzNjQ4IiAvPgogIDxyZWN0IHg9Ijk2IiB5PSIxMDIiIHdpZHRoPSIxMTgiIGhlaWdodD0iODQiIHJ4PSIxMiIgZmlsbD0iIzBiMTMyNCIgLz4KICA8cmVjdCB4PSIxMDQiIHk9IjExMiIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjgiIHJ4PSI0IiBmaWxsPSIjOTRhM2I4IiAvPgogIDxyZWN0IHg9IjEwNCIgeT0iMTI4IiB3aWR0aD0iNzAiIGhlaWdodD0iOCIgcng9IjQiIGZpbGw9IiM0NzU1NjkiIC8+CiAgPHJlY3QgeD0iOTYiIHk9IjE5MiIgd2lkdGg9IjExOCIgaGVpZ2h0PSIxMCIgcng9IjUiIGZpbGw9IiMxZjI5MzciIC8+CiAgPGNpcmNsZSBjeD0iMTEwIiBjeT0iMjEwIiByPSI4IiBmaWxsPSIjZmZkMTY2IiAvPgogIDxjaXJjbGUgY3g9IjIwMCIgY3k9IjIxMCIgcj0iOCIgZmlsbD0iI2ZmZDE2NiIgLz4KICA8cGF0aCBkPSJNMjc4IDExMGgxNTAiIHN0cm9rZT0iIzY0ZjRhYyIgc3Ryb2tlLXdpZHRoPSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiAvPgogIDxwYXRoIGQ9Ik00MDQgODZsMjQgMjQtMjQgMjQiIHN0cm9rZT0iIzY0ZjRhYyIgc3Ryb2tlLXdpZHRoPSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiAvPgogIDxwYXRoIGQ9Ik00MzAgMjEwaC0xNTAiIHN0cm9rZT0iI2ZmNmI2YiIgc3Ryb2tlLXdpZHRoPSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiAvPgogIDxwYXRoIGQ9Ik0zMDQgMTg2bC0yNCAyNCAyNCAyNCIgc3Ryb2tlPSIjZmY2YjZiIiBzdHJva2Utd2lkdGg9IjEwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIC8+CiAgPHJlY3QgeD0iMjkyIiB5PSIxMjYiIHdpZHRoPSIxNTAiIGhlaWdodD0iNzAiIHJ4PSIxOCIgZmlsbD0iIzBiMTMyNCIgc3Ryb2tlPSIjMmIzNjQ4IiBzdHJva2Utd2lkdGg9IjIiIC8+CiAgPHJlY3QgeD0iMzEyIiB5PSIxNDQiIHdpZHRoPSI3MCIgaGVpZ2h0PSIxMCIgcng9IjUiIGZpbGw9IiM5NGEzYjgiIC8+CiAgPHJlY3QgeD0iMzEyIiB5PSIxNjAiIHdpZHRoPSI5MiIgaGVpZ2h0PSIxMCIgcng9IjUiIGZpbGw9IiM0NzU1NjkiIC8+CiAgPHRleHQgeD0iNjgiIHk9IjI2NiIgZmlsbD0iIzk0YTNiOCIgZm9udC1zaXplPSIxMiIgZm9udC1mYW1pbHk9IlNwYWNlIEdyb3Rlc2ssIHNhbnMtc2VyaWYiPm1vYmlsaXR5IGRlY2s8L3RleHQ+Cjwvc3ZnPgo=",import.meta.url).href,alt:"Valise et fleches de mobilite interne."},calibration:{src:new URL("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIwIiBoZWlnaHQ9IjMyMCIgdmlld0JveD0iMCAwIDUyMCAzMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjUyMCIgaGVpZ2h0PSIzMjAiIHJ4PSIyOCIgZmlsbD0iIzBiMTAxYSIgLz4KICA8cmVjdCB4PSIzMiIgeT0iMjgiIHdpZHRoPSI0NTYiIGhlaWdodD0iMjY0IiByeD0iMjQiIGZpbGw9IiMwZjE3MmEiIHN0cm9rZT0iIzFmMjkzNyIgc3Ryb2tlLXdpZHRoPSIyIiAvPgogIDxyZWN0IHg9IjY0IiB5PSI2NCIgd2lkdGg9IjM5MiIgaGVpZ2h0PSIxOTIiIHJ4PSIxOCIgZmlsbD0iIzBiMTMyNCIgc3Ryb2tlPSIjMmIzNjQ4IiBzdHJva2Utd2lkdGg9IjIiIC8+CiAgPHJlY3QgeD0iODgiIHk9Ijg2IiB3aWR0aD0iMzQ0IiBoZWlnaHQ9IjM0IiByeD0iMTAiIGZpbGw9IiMxMTE4MjciIC8+CiAgPHJlY3QgeD0iODgiIHk9IjEzMiIgd2lkdGg9IjM0NCIgaGVpZ2h0PSIzNCIgcng9IjEwIiBmaWxsPSIjMTExODI3IiAvPgogIDxyZWN0IHg9Ijg4IiB5PSIxNzgiIHdpZHRoPSIzNDQiIGhlaWdodD0iMzQiIHJ4PSIxMCIgZmlsbD0iIzExMTgyNyIgLz4KICA8Y2lyY2xlIGN4PSIxMTAiIGN5PSIxMDMiIHI9IjEwIiBmaWxsPSIjNjRmNGFjIiAvPgogIDxjaXJjbGUgY3g9IjExMCIgY3k9IjE0OSIgcj0iMTAiIGZpbGw9IiNmZmQxNjYiIC8+CiAgPGNpcmNsZSBjeD0iMTEwIiBjeT0iMTk1IiByPSIxMCIgZmlsbD0iI2ZmNmI2YiIgLz4KICA8cmVjdCB4PSIxMzIiIHk9Ijk2IiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjEyIiByeD0iNiIgZmlsbD0iIzk0YTNiOCIgLz4KICA8cmVjdCB4PSIxMzIiIHk9IjE0MiIgd2lkdGg9IjE2MCIgaGVpZ2h0PSIxMiIgcng9IjYiIGZpbGw9IiM5NGEzYjgiIC8+CiAgPHJlY3QgeD0iMTMyIiB5PSIxODgiIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIiIHJ4PSI2IiBmaWxsPSIjOTRhM2I4IiAvPgogIDxyZWN0IHg9IjMxMiIgeT0iOTYiIHdpZHRoPSI4NCIgaGVpZ2h0PSIxMiIgcng9IjYiIGZpbGw9IiMxZjI5MzciIC8+CiAgPHJlY3QgeD0iMzEyIiB5PSIxNDIiIHdpZHRoPSI4NCIgaGVpZ2h0PSIxMiIgcng9IjYiIGZpbGw9IiMxZjI5MzciIC8+CiAgPHJlY3QgeD0iMzEyIiB5PSIxODgiIHdpZHRoPSI4NCIgaGVpZ2h0PSIxMiIgcng9IjYiIGZpbGw9IiMxZjI5MzciIC8+CiAgPHBhdGggZD0iTTM1NiAxODBsMzQgMzQiIHN0cm9rZT0iI2ZmNmI2YiIgc3Ryb2tlLXdpZHRoPSI4IiBzdHJva2UtbGluZWNhcD0icm91bmQiIC8+CiAgPHBhdGggZD0iTTM5MCAxODBsLTM0IDM0IiBzdHJva2U9IiNmZjZiNmIiIHN0cm9rZS13aWR0aD0iOCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiAvPgogIDx0ZXh0IHg9Ijc0IiB5PSIyNDQiIGZpbGw9IiM5NGEzYjgiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtZmFtaWx5PSJTcGFjZSBHcm90ZXNrLCBzYW5zLXNlcmlmIj5jYWxpYnJhdGlvbiBncmlkPC90ZXh0Pgo8L3N2Zz4K",import.meta.url).href,alt:"Grille de performance avec classement et croix rouges."},"crise-publique":{src:new URL("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIwIiBoZWlnaHQ9IjMyMCIgdmlld0JveD0iMCAwIDUyMCAzMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjUyMCIgaGVpZ2h0PSIzMjAiIHJ4PSIyOCIgZmlsbD0iIzBiMTAxYSIgLz4KICA8cmVjdCB4PSIzMiIgeT0iMjgiIHdpZHRoPSI0NTYiIGhlaWdodD0iMjY0IiByeD0iMjQiIGZpbGw9IiMwZjE3MmEiIHN0cm9rZT0iIzFmMjkzNyIgc3Ryb2tlLXdpZHRoPSIyIiAvPgogIDxyZWN0IHg9IjY0IiB5PSI3NiIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIxNDAiIHJ4PSIxOCIgZmlsbD0iIzBiMTMyNCIgc3Ryb2tlPSIjMmIzNjQ4IiBzdHJva2Utd2lkdGg9IjIiIC8+CiAgPHJlY3QgeD0iODIiIHk9Ijk0IiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEwIiByeD0iNSIgZmlsbD0iIzk0YTNiOCIgLz4KICA8cmVjdCB4PSI4MiIgeT0iMTEyIiB3aWR0aD0iMTYwIiBoZWlnaHQ9IjEwIiByeD0iNSIgZmlsbD0iIzQ3NTU2OSIgLz4KICA8cmVjdCB4PSI4MiIgeT0iMTMwIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjEwIiByeD0iNSIgZmlsbD0iIzk0YTNiOCIgLz4KICA8cmVjdCB4PSI4MiIgeT0iMTQ4IiB3aWR0aD0iMTEwIiBoZWlnaHQ9IjEwIiByeD0iNSIgZmlsbD0iIzQ3NTU2OSIgLz4KICA8cmVjdCB4PSI4MiIgeT0iMTY2IiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjEwIiByeD0iNSIgZmlsbD0iIzk0YTNiOCIgLz4KICA8cmVjdCB4PSIzMDAiIHk9IjExMCIgd2lkdGg9IjE1MCIgaGVpZ2h0PSI5MCIgcng9IjIwIiBmaWxsPSIjMTExODI3IiBzdHJva2U9IiMyYjM2NDgiIHN0cm9rZS13aWR0aD0iMiIgLz4KICA8cGF0aCBkPSJNMzEyIDEzMmw4MCAxOC04MCAxOCIgZmlsbD0iI2ZmNmI2YiIgLz4KICA8cGF0aCBkPSJNMzk4IDEyOGMxNiAxMCAyNCAyNCAyNCA0MCIgc3Ryb2tlPSIjZmZkMTY2IiBzdHJva2Utd2lkdGg9IjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgLz4KICA8cGF0aCBkPSJNNDA4IDEyMmMyMCAxMiAzMiAzMCAzMiA1MCIgc3Ryb2tlPSIjZmZkMTY2IiBzdHJva2Utd2lkdGg9IjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgLz4KICA8cGF0aCBkPSJNNDIwIDExNmMyNCAxNCAzOCAzNiAzOCA2MCIgc3Ryb2tlPSIjZmZkMTY2IiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgLz4KICA8Y2lyY2xlIGN4PSIzNTYiIGN5PSIyMjQiIHI9IjEyIiBmaWxsPSIjZmY2YjZiIiAvPgogIDxjaXJjbGUgY3g9IjM4MCIgY3k9IjIyNCIgcj0iMTIiIGZpbGw9IiNmZmQxNjYiIC8+CiAgPGNpcmNsZSBjeD0iNDA0IiBjeT0iMjI0IiByPSIxMiIgZmlsbD0iIzY0ZjRhYyIgLz4KICA8dGV4dCB4PSI3MCIgeT0iMjQ0IiBmaWxsPSIjOTRhM2I4IiBmb250LXNpemU9IjEyIiBmb250LWZhbWlseT0iU3BhY2UgR3JvdGVzaywgc2Fucy1zZXJpZiI+Y3Jpc2lzIG1lbW88L3RleHQ+Cjwvc3ZnPgo=",import.meta.url).href,alt:"Megaphone et memo de crise."}};if(I){const e=document.documentElement.style;e.setProperty("--color-primary",I.colors.primary),e.setProperty("--color-secondary",I.colors.secondary),e.setProperty("--color-accent",I.colors.accent),e.setProperty("--color-text",I.colors.text),e.setProperty("--color-muted",I.colors.muted),e.setProperty("--color-bg",I.colors.background||"#0b101a"),e.setProperty("--color-surface",I.colors.surface||"rgba(255, 255, 255, 0.06)"),document.body.style.background=I.gradient||document.body.style.background}const D=document.getElementById("game-canvas"),S=document.getElementById("ui"),h=document.createElement("div");h.className="rh-shell";S.appendChild(h);const l=document.createElement("div");l.className="launch-overlay";l.style.display="none";S.appendChild(l);function R(){D.width=window.innerWidth*devicePixelRatio,D.height=window.innerHeight*devicePixelRatio}R();window.addEventListener("resize",R);const t={index:0,gauges:A(),pending:[],deferredNow:[],activeResult:null,runStarted:0};function A(){const e=g.map(i=>[i.id,i.initial??M]);return Object.fromEntries(e)}function U(e){return Math.min($,Math.max(O,Math.round(e)))}function Z(e){Object.entries(e).forEach(([i,a])=>{const n=t.gauges[i]??M;t.gauges[i]=U(n+a)})}function V(e,i){e.deferredConsequences.forEach(a=>{t.pending.push({applyAt:t.index+a.delay,summary:a.summary,event:a.event,effects:a.effects,source:{scenarioId:i,choiceId:e.id}})})}function X(e){const i=t.pending.filter(a=>a.applyAt===e);return t.pending=t.pending.filter(a=>a.applyAt!==e),i.forEach(a=>Z(a.effects)),i}function K(){const e=t.pending.filter(i=>i.applyAt>=m.length);return t.pending=[],e.forEach(i=>Z(i.effects)),e}function F(){const e=(t.gauges.satisfaction||0)+(t.gauges.performance||0)+(t.gauges.legal||0)+(t.gauges.reputation||0),i=(t.gauges.pressure||0)+(t.gauges.burnout||0)+(t.gauges.cynicism||0)+(t.gauges.socialRisk||0),a=Math.round((e+(400-i))/8);return Math.max(0,Math.min(100,a))}function _(){return v.find(i=>{if(i.min){for(const[a,n]of Object.entries(i.min))if((t.gauges[a]??M)<n)return!1}if(i.max){for(const[a,n]of Object.entries(i.max))if((t.gauges[a]??M)>n)return!1}return!0})||v[v.length-1]}function G(){if(!s){j("Config a completer","Cree configs/games/rhlife.config.json",!1);return}l.style.display="none",t.index=0,t.gauges=A(),t.pending=[],t.deferredNow=[],t.activeResult=null,t.runStarted=Date.now(),b({type:"SESSION_START",gameId:u}),P()}function z(e){if(t.activeResult)return;const i=m[t.index],a=i==null?void 0:i.choices[e];a&&(Z(a.immediateEffects),V(a,i.id),t.activeResult={scenarioId:i.id,choice:a,immediateEffects:a.immediateEffects},b({type:"CHOICE_MADE",gameId:u,payload:{scenarioId:i.id,choiceId:a.id}}),P())}function B(){if(!t.activeResult)return;b({type:"SCENARIO_COMPLETE",gameId:u,payload:{scenarioId:t.activeResult.scenarioId}}),t.activeResult=null;const e=t.index+1;if(e>=m.length){ee();return}t.index=e,t.deferredNow=X(t.index),P()}function ee(){const e=K(),i=_(),a=F();b({type:"ENDING_REACHED",gameId:u,payload:{endingId:i.id,score:a}}),b({type:"SESSION_WIN",gameId:u,payload:{endingId:i.id,score:a}}),Y(u,(s==null?void 0:s.saveSchemaVersion)??1,n=>{const r=n.state.runs||0;n.state.runs=r+1,n.state.lastEndingId=i.id,n.state.lastScore=a,(!n.bestScore||a>n.bestScore)&&(n.bestScore=a,n.state.bestScore=a)}),te(i,a,e)}function P(){const e=m[t.index];if(!e)return;const i=g.filter(p=>p.visible),a=g.filter(p=>!p.visible),n=ie(t.deferredNow),r=q[e.id],c=r?`<div class="rh-illustration"><img src="${r.src}" alt="${r.alt}" /></div>`:"",d=t.activeResult?ae(t.activeResult):"",o=t.activeResult?"":`
      <div class="rh-choices">
        ${e.choices.map((p,N)=>`<button class="rh-choice" data-choice-index="${N}"><span>${N+1}</span>${p.label}</button>`).join("")}
      </div>
    `;h.innerHTML=`
    <div class="rh-header">
      <div class="rh-title">${(s==null?void 0:s.uiText.title)||"RHLife"}</div>
      <div class="rh-meta">
        <span>Scenario ${t.index+1}/${m.length}</span>
        <span>Difficulte ${e.difficulty}</span>
      </div>
      <div class="rh-tags">
        <span class="rh-tag">${e.title}</span>
      </div>
    </div>
    <div class="rh-grid">
      <section class="rh-panel">
        <h2>Jauges visibles</h2>
        ${i.map(H).join("")}
        <h2>Indicateurs internes</h2>
        ${a.map(H).join("")}
      </section>
      <section class="rh-panel">
        ${n}
        ${c}
        <h2>Contexte narratif</h2>
        <div class="rh-context">
          ${f("Mail",e.context.mail)}
          ${f("Reunion",e.context.meeting)}
          ${f("Rumeur",e.context.rumor)}
          ${f("Incident",e.context.incident)}
          ${f("Urgent",e.context.urgentRequest)}
        </div>
        <h2>Situation problematique</h2>
        <div class="rh-problem">${e.problem}</div>
        ${d}
        ${o}
      </section>
    </div>
  `}function H(e){const i=t.gauges[e.id]??M,a=Math.min(100,Math.max(0,i));return`
    <div class="rh-gauge ${e.polarity==="negative"?"is-negative":"is-positive"}">
      <div class="rh-gauge-head">
        <span>${e.label}</span>
        <strong>${i}</strong>
      </div>
      <div class="rh-gauge-bar"><span style="width: ${a}%"></span></div>
    </div>
  `}function f(e,i){return`
    <div class="rh-context-item">
      <span>${e}</span>
      <div>${i}</div>
    </div>
  `}function ie(e){return e.length?`
    <div class="rh-deferred">
      <h4>Consequences differees</h4>
      ${e.map(i=>`<p>${i.summary} (${i.event})</p>`).join("")}
    </div>
  `:""}function ae(e){const i=Object.entries(e.immediateEffects).map(([n,r])=>{const c=J.get(n);if(!c)return"";const d=r>0?"+":"",o=r>=0?"pos":"neg";return`
        <div class="rh-effect">
          <strong>${c.label}</strong>
          <span class="${o}">${d}${r}</span>
        </div>
      `}).join(""),a=e.choice.deferredConsequences.length?e.choice.deferredConsequences.map(n=>`<div class="rh-effect"><strong>Dans ${n.delay} scenario(s)</strong><span>${n.summary}</span></div>`).join(""):'<div class="rh-effect"><span>Aucun signal differe identifie.</span></div>';return`
    <div class="rh-result">
      <div class="rh-result-title">Decision actee</div>
      <p class="rh-result-choice">${e.choice.label}</p>
      <div class="rh-result-block">
        <h4>Feedback corporate</h4>
        <p>${e.choice.feedback}</p>
      </div>
      <div class="rh-result-block">
        <h4>Effets immediats</h4>
        <div class="rh-effects">${i}</div>
      </div>
      <div class="rh-result-block">
        <h4>Consequences differees possibles</h4>
        <div class="rh-effects">${a}</div>
      </div>
      <div class="rh-result-meta">
        <div>
          <span>Evenement futur declenchable</span>
          <p>${e.choice.futureEvent}</p>
        </div>
        <div>
          <span>Impact potentiel sur la fin du jeu</span>
          <p>${e.choice.endingImpact}</p>
        </div>
      </div>
      <button class="rh-btn" data-action="continue">Continuer</button>
    </div>
  `}function j(e,i,a=!0){l.style.display="grid";const n=(s==null?void 0:s.uiText.shortDescription)||"",r=i||(s==null?void 0:s.uiText.help)||"",c=((s==null?void 0:s.uiText.controls)||[]).map(o=>`<span class="launch-chip">${o}</span>`).join("");l.innerHTML=`
    <div class="launch-card">
      <div class="launch-head">
        <div class="launch-brand">
          <span class="launch-badge">Arcade Galaxy</span>
          <span class="launch-badge ghost">${(s==null?void 0:s.uiText.title)||"RHLife"}</span>
        </div>
        <h2 class="launch-title">${e}</h2>
        ${n?`<p class="launch-subtitle">${n}</p>`:""}
      </div>
      <div class="launch-grid">
        <section class="launch-section">
          <h3 class="launch-section-title">Briefing</h3>
          <p class="launch-text">${r}</p>
          <p class="launch-note">Chaque choix deplace des jauges visibles et internes. Rien n'est neutre.</p>
        </section>
        <section class="launch-section">
          <h3 class="launch-section-title">Indicateurs</h3>
          <div class="launch-metrics">
            ${g.map(o=>`<div class="launch-metric"><span>${o.label}</span><strong>${t.gauges[o.id]}</strong></div>`).join("")}
          </div>
        </section>
        <section class="launch-section">
          <h3 class="launch-section-title">Controles</h3>
          <div class="launch-chips">
            ${c||'<span class="launch-chip muted">Controles a definir</span>'}
          </div>
        </section>
      </div>
      <div class="launch-actions">
        ${a?'<button class="launch-btn primary" id="launch-start">Lancer</button>':""}
        <a class="launch-btn ghost" href="${x("/")}">Hub</a>
      </div>
    </div>
  `;const d=document.getElementById("launch-start");d==null||d.addEventListener("click",G)}function te(e,i,a){var r;l.style.display="grid";const n=a.length?a.map(c=>`<p class="launch-note">${c.summary} (${c.event})</p>`).join(""):'<p class="launch-note">Aucune onde de choc supplementaire detectee.</p>';l.innerHTML=`
    <div class="launch-card">
      <div class="launch-head">
        <div class="launch-brand">
          <span class="launch-badge">Fin atteinte</span>
          <span class="launch-badge ghost">${e.title}</span>
        </div>
        <h2 class="launch-title">${e.title}</h2>
        <p class="launch-subtitle">${e.description}</p>
      </div>
      <div class="launch-grid">
        <section class="launch-section">
          <h3 class="launch-section-title">Bilan</h3>
          <p class="launch-text">Score de carriere: ${i}</p>
          ${n}
        </section>
        <section class="launch-section">
          <h3 class="launch-section-title">Jauges finales</h3>
          <div class="launch-metrics">
            ${g.map(c=>`<div class="launch-metric"><span>${c.label}</span><strong>${t.gauges[c.id]}</strong></div>`).join("")}
          </div>
        </section>
      </div>
      <div class="launch-actions">
        <button class="launch-btn primary" id="launch-retry">Rejouer</button>
        <a class="launch-btn ghost" href="${x("/")}">Hub</a>
      </div>
    </div>
  `,(r=document.getElementById("launch-retry"))==null||r.addEventListener("click",G)}function se(e){if(l.style.display!=="none")return;const i=(s==null?void 0:s.input.keys)||{};if(t.activeResult){(e.code===i.next||e.code==="Enter")&&B();return}const a=m[t.index];if(!a)return;const r=[i.choice1,i.choice2,i.choice3,i.choice4].findIndex(c=>c&&e.code===c);r>=0&&r<a.choices.length&&z(r)}h.addEventListener("click",e=>{const i=e.target;if(!i)return;const a=i.closest("[data-choice-index]");if(a){const r=Number(a.dataset.choiceIndex);z(r);return}const n=i.closest("[data-action]");(n==null?void 0:n.dataset.action)==="continue"&&B()});window.addEventListener("keydown",se);s?j(s.uiText.title,s.uiText.help,!0):j("Config manquante","Ajoute configs/games/rhlife.config.json",!1);
